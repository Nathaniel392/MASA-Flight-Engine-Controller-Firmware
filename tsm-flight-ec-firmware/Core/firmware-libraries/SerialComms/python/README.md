# MASA Talking Libary Python-side
This repository contains python scripts that generate firmware and GUI files based on .csv templates with telemetry and command byte formatting code. The code is run in the `/python` directory, firmware C code is generated in the `/inc` and `/src` directories, and GUI python files are generated in the `/gui` directory.

# telem\_file\_generator.py
`telem_file_generator.py` takes in a .csv template file that contains information about what data should be stored as global variables in the firmware. It is called with `$ python telem_file_generator.py telem_template_file.csv`, where `telem_template_file.csv` is the name of the template file to be read. It generates all of the following files based on it:

### `globals.h/globals.c`
`globals.h` defines all the variables in the .csv as `extern`. `globals.c` initializes all those variables to 0, and has a non-autogenerated section that the user can modify to add their own initializations.

### `pack_telem_defines.h`
`pack_telem_defines.h` converts all the global variables into bit strings that can be transmitted.

### `pack_telem_defines.c`
`pack_telem_defines.c` defines a function that updates that stores global variable bit strings into an array.

### `telemParse.py`
`telemParse.py` contains a `TelemParse` class that is used by the GUI to receive data from the microcontroller.

# cmd\_file\_generator.py
`cmd_file_generator.py` takes in a .csv template file that contains information about board-specific commands and their parameters. It is called with `$ python cmd_file_generator.py cmd_template_file.csv gui_python_filepath`, where `cmd_template_file.csv` is the name of the template file to be read, and `gui_python_filepath` is the address of the folder to generate `_S2_Interface_Autogen.py` into. If the filepath is left empty, it will generate by default into the current directory. The script generates all of the following files based on it:

### `_S2_InterfaceAutogen.py`
`_S2_InterfaceAutogen.py` is a support file for the `S2_Interface` class in the GUI that takes commands sent from the GUI and packs them into bit strings to be sent to the board. It also contains dictionaries used by the GUI to check each function's arguments.